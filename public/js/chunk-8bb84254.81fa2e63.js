(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8bb84254","chunk-e06dc7fe","chunk-2d2097aa","chunk-2d21d8ef"],{"296f":function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var l=o("7a23");function a(e){const t=Object(l["shallowReactive"])((()=>{const t={};for(let o in e)t[o]=void 0;return t})()),o=(()=>{const o={};for(let l in e)o[l]=e=>{t[l]=e};return o})();return{refs:t,onRef:o}}},6127:function(e,t,o){"use strict";o.r(t);var l=o("7a23"),a=o("d8e8"),r=o("3ef4"),c=o("79f6"),n=o("a8da"),i=o("296f");function d(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Object(l["isVNode"])(e)}t["default"]=Object(l["defineComponent"])({props:{projectName:{type:String},branch:{type:String},buildDailogVisible:{type:Boolean,default:!1}},emits:{closeDialog:()=>!0},setup(e,{emit:t}){const{onRef:o,refs:b}=Object(i["a"])({form:a["a"]}),s=Object(l["reactive"])({formData:{removeNm:!1,install:!1,branch:e.branch,shell:!1,shellContent:"",pull:!0,publish:!1,pubTargetIp:"",pubTargetProt:"",pubTargetDir:"",pubTargetUser:"",pubTargetPwd:"",publishId:""},publishList:[],rules:{branch:[{required:!0,message:"Please enter the branch",trigger:"change"}],shellContent:[{required:!0,message:"Please enter the shell content",trigger:"change"}],publishId:[{required:!0,message:"Please select publish info",trigger:"change"}]},logProjectName:"",dialogFormVisible:!1,loading:!1}),m={getPublishList:()=>{Object(c["l"])().then(e=>{s.publishList=e.data.content||[]})},closeDialog:()=>{t("closeDialog")},closeLogDialog:()=>{s.dialogFormVisible=!1},publishChange:()=>{if(s.formData.publish&&s.formData.publishId){const{id:e,describe:t,...o}=s.publishList.find(e=>e.id===s.formData.publishId)||{};s.formData={...s.formData,...o}}},build:()=>{var t;null===(t=b.form)||void 0===t||t.validate(t=>{!0===t&&(s.loading=!0,Object(c["a"])({...s.formData,projectName:e.projectName}).then(e=>{s.loading=!1,Object(r["a"])({type:"success",message:e.data.message}),s.logProjectName=e.data.content,s.dialogFormVisible=!0}).catch(()=>s.loading=!1))})},removeNm:()=>{s.formData.removeNm&&(s.formData.install=!0)},getShellContent:()=>{s.formData.shell&&Object(c["m"])(e.projectName).then(e=>{s.formData.shellContent=e.data.content})}};return()=>{let t;return Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])(Object(l["resolveComponent"])("el-dialog"),{modelValue:e.buildDailogVisible,"onUpdate:modelValue":t=>e.buildDailogVisible=t,top:"5vh",width:800,title:"build "+e.projectName,"before-close":m.closeDialog},{default:()=>[Object(l["withDirectives"])(Object(l["createVNode"])(Object(l["resolveComponent"])("el-form"),{ref:o.form,model:s.formData,"label-width":180,rules:s.rules,style:{width:"700px"}},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"remove node_modules"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:s.formData.removeNm,"onUpdate:modelValue":e=>s.formData.removeNm=e,onChange:m.removeNm},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"is Install："},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:s.formData.install,"onUpdate:modelValue":e=>s.formData.install=e,onChange:m.removeNm},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"Branch"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{modelValue:s.formData.branch,"onUpdate:modelValue":e=>s.formData.branch=e},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"is Pull"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:s.formData.pull,"onUpdate:modelValue":e=>s.formData.pull=e},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"is Shell："},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:s.formData.shell,"onUpdate:modelValue":e=>s.formData.shell=e,onChange:m.getShellContent},null)]}),s.formData.shell&&Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"shell content：",prop:"shellContent"},{default:()=>[Object(l["createVNode"])("span",{style:{color:"red"}},[Object(l["createTextVNode"])("ps: custom shell scripts will completely overwrite built-in commands")]),Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{type:"textarea",modelValue:s.formData.shellContent,"onUpdate:modelValue":e=>s.formData.shellContent=e,rows:20},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"is Publish："},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:s.formData.publish,"onUpdate:modelValue":e=>s.formData.publish=e,onChange:m.getPublishList},null)]}),s.formData.publish&&Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"publish IP：",prop:"publishId"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-select"),{modelValue:s.formData.publishId,"onUpdate:modelValue":e=>s.formData.publishId=e,filterable:!0,clearable:!0,onChange:m.publishChange,style:{}},d(t=s.publishList.map(e=>Object(l["createVNode"])(Object(l["resolveComponent"])("el-option"),{key:e.id,label:e.describe,value:e.id},null)))?t:{default:()=>[t]})]})])]}),[[Object(l["resolveDirective"])("loading"),s.loading]])],footer:()=>Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])("div",{class:"dialog-footer"},[Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{onClick:m.closeDialog},{default:()=>[Object(l["createTextVNode"])("Cancel")]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{type:"primary",onClick:m.build},{default:()=>[Object(l["createTextVNode"])("Build")]})])])}),s.dialogFormVisible&&Object(l["createVNode"])(n["default"],{dialogFormVisible:s.dialogFormVisible,projectName:s.logProjectName,onCloseDialog:m.closeLogDialog},null)])}}})},"8afa":function(e,t,o){"use strict";o.r(t);var l=o("7a23"),a=o("3ef4"),r=o("c9a1"),c=o("79f6"),n=o("6127"),i=o("d28c");t["default"]=Object(l["defineComponent"])({setup(){const e=Object(l["reactive"])({tableData:[],formData:{projectName:"",targetUrl:"",branch:"master",useToken:!0},loading:{formLoading:!1,tabLoading:!1},tagsProjectName:"",tagsDialog:!1,dialogFormVisible:!1,buildDailogVisible:!1,buildProjectName:{projectName:"",branch:""},rules:{projectName:[{required:!0,message:"Please enter the git Project Name",trigger:"change"}],branch:[{required:!0,message:"Please enter the git Branch",trigger:"change"}],targetUrl:[{required:!0,message:"Please enter the git Target Url",trigger:"change"}]}}),t={handleCreate:()=>{o.loading("form",!0),Object(c["b"])(e.formData).then(()=>{Object(a["a"])({message:"success!!",type:"success"}),o.loading("form"),t.handleDialog(!1),o.fetchData()}).catch(()=>o.loading("form"))},closeBuildDialog:()=>{e.buildDailogVisible=!1,o.fetchData()},handleDialog:t=>e.dialogFormVisible=t,beforeBuild:t=>{e.buildProjectName=t,e.buildDailogVisible=!0},historyTags:t=>{e.tagsProjectName=t,e.tagsDialog=!0},delete:e=>{r["a"].confirm("delete project ?","Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}).then(()=>{o.loading("tab",!0),Object(c["e"])(e).then(()=>{o.loading("tab"),o.fetchData()}).catch(()=>o.loading("tab"))})}},o={loading:(t,o=!1)=>{const l=t+"Loading";e.loading[l]=o},fetchData:()=>{o.loading("tab",!0),Object(c["j"])().then(t=>{e.tableData=t.data.content||[],o.loading("tab")}).catch(()=>o.loading("tab"))}};return Object(l["onMounted"])(()=>{o.fetchData()}),()=>Object(l["createVNode"])("div",null,[Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{type:"primary",onClick:()=>t.handleDialog(!0)},{default:()=>[Object(l["createTextVNode"])("add")]}),Object(l["withDirectives"])(Object(l["createVNode"])(Object(l["resolveComponent"])("el-table"),{data:e.tableData},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-table-column"),{prop:"projectName",label:"Project Name",width:"300"},null),Object(l["createVNode"])(Object(l["resolveComponent"])("el-table-column"),{prop:"branch",label:"Branch",width:"100"},null),Object(l["createVNode"])(Object(l["resolveComponent"])("el-table-column"),{prop:"targetUrl",label:"Target Url"},null),Object(l["createVNode"])(Object(l["resolveComponent"])("el-table-column"),{label:"operation",width:"240"},{default:({row:e})=>Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{type:"primary",onClick:()=>t.beforeBuild(e)},{default:()=>[Object(l["createTextVNode"])("build")]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{type:"warning",onClick:()=>t.historyTags(e.projectName)},{default:()=>[Object(l["createTextVNode"])("tags")]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{type:"danger",onClick:()=>t.delete(e.projectName)},{default:()=>[Object(l["createTextVNode"])("del")]})])})]}),[[Object(l["resolveDirective"])("loading"),e.loading.tabLoading]]),Object(l["createVNode"])(Object(l["resolveComponent"])("el-dialog"),{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t=>e.dialogFormVisible=t,title:"Create Project",width:"500"},{default:()=>[Object(l["withDirectives"])(Object(l["createVNode"])(Object(l["resolveComponent"])("el-form"),{model:e.formData,"label-width":140,rules:e.rules},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"Project Name",prop:"projectName"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{modelValue:e.formData.projectName,"onUpdate:modelValue":t=>e.formData.projectName=t,clearable:!0},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"Target Url",prop:"targetUrl"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{modelValue:e.formData.targetUrl,"onUpdate:modelValue":t=>e.formData.targetUrl=t,clearable:!0},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"Target Url",prop:"branch"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{modelValue:e.formData.branch,"onUpdate:modelValue":t=>e.formData.branch=t,clearable:!0},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"Use Git Config",prop:"useToken"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:e.formData.useToken,"onUpdate:modelValue":t=>e.formData.useToken=t},null)]})]}),[[Object(l["resolveDirective"])("loading"),e.loading.formLoading]])],footer:()=>Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])("div",{class:"dialog-footer"},[Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{onClick:()=>t.handleDialog(!1)},{default:()=>[Object(l["createTextVNode"])("Cancel")]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{type:"primary",onClick:t.handleCreate},{default:()=>[Object(l["createTextVNode"])("Confirm")]})])])}),e.buildDailogVisible&&Object(l["createVNode"])(n["default"],{buildDailogVisible:e.buildDailogVisible,projectName:e.buildProjectName.projectName,branch:e.buildProjectName.branch,onCloseDialog:t.closeBuildDialog},null),e.tagsDialog&&Object(l["createVNode"])(i["default"],{tagsDialog:e.tagsDialog,tagsProjectName:e.tagsProjectName,onCloseDialog:()=>e.tagsDialog=!1},null)])}})},a8da:function(e,t,o){"use strict";o.r(t);var l=o("7a23");t["default"]=Object(l["defineComponent"])({props:{dialogFormVisible:{type:Boolean,default:!1},projectName:{type:String}},emits:{closeDialog:()=>!0},setup(e,{emit:t}){const o=Object(l["ref"])(""),a=Object(l["ref"])(null);Object(l["onMounted"])(()=>{const t=a.value=new EventSource("/get_log?projectName="+e.projectName);t.onmessage=e=>{o.value=(""+e.data).replace(/<br>/g,"\n")},t.onerror=()=>{o.value="error"}});const r={closeDialog:()=>{var e;null===(e=a.value)||void 0===e||e.close(),t("closeDialog")}};return()=>Object(l["createVNode"])(Object(l["resolveComponent"])("el-dialog"),{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t=>e.dialogFormVisible=t,title:"Build Logs",width:"80%",top:"5vh","before-close":r.closeDialog},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{type:"textarea",modelValue:o.value,"onUpdate:modelValue":e=>o.value=e,rows:30,readonly:!0},null)],footer:()=>Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])("div",{class:"dialog-footer"},[Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{onClick:r.closeDialog},{default:()=>[Object(l["createTextVNode"])("Cancel")]})])])})}})},d28c:function(e,t,o){"use strict";o.r(t);var l=o("7a23"),a=o("79f6"),r=o("3ef4");t["default"]=Object(l["defineComponent"])({props:{tagsProjectName:{type:String},tagsDialog:{type:Boolean}},emits:{closeDialog:()=>!0},setup(e,{emit:t}){const o=Object(l["reactive"])({tableData:[],loading:!1}),c={closeDialog:()=>t("closeDialog"),delete:e=>{o.loading=!0,Object(a["c"])(e).then(e=>{Object(r["a"])({message:"success!!",type:"success"}),o.loading=!1,n.fetchData()}).catch(()=>o.loading=!1)}},n={fetchData(){o.loading=!0,Object(a["o"])(e.tagsProjectName).then(e=>{o.tableData=e.data.content.map(e=>{const[t,o,l]=e.split("-");return{tagName:t,branch:o,commitId:l}}),o.loading=!1}).catch(()=>o.loading=!1)}};return Object(l["onMounted"])(()=>{n.fetchData()}),()=>Object(l["createVNode"])(Object(l["resolveComponent"])("el-dialog"),{modelValue:e.tagsDialog,"onUpdate:modelValue":t=>e.tagsDialog=t,title:e.tagsProjectName+" Termianl",width:"50%",top:"5vh","before-close":c.closeDialog},{default:()=>[Object(l["withDirectives"])(Object(l["createVNode"])(Object(l["resolveComponent"])("el-table"),{data:o.tableData,border:!0,height:"250"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-table-column"),{prop:"tagName",label:"Tag Name"},null),Object(l["createVNode"])(Object(l["resolveComponent"])("el-table-column"),{prop:"branch",label:"Branch",width:"140"},null),Object(l["createVNode"])(Object(l["resolveComponent"])("el-table-column"),{prop:"commitId",label:"CommitId"},null),Object(l["createVNode"])(Object(l["resolveComponent"])("el-table-column"),{label:"Operation",width:"100"},{default:({row:e})=>Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{type:"danger",onClick:()=>c.delete(`${e.tagName}-${e.branch}-${e.commitId}`)},{default:()=>[Object(l["createTextVNode"])("del")]})])})]}),[[Object(l["resolveDirective"])("loading"),o.loading]])],footer:()=>Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])("div",{class:"dialog-footer"},[Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{onClick:c.closeDialog},{default:()=>[Object(l["createTextVNode"])("Cancel")]})])])})}})}}]);
//# sourceMappingURL=chunk-8bb84254.81fa2e63.js.map