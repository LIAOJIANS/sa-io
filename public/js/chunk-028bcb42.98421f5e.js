(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-028bcb42","chunk-e06dc7fe","chunk-2d2097aa"],{"296f":function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var l=o("7a23");function a(e){const t=Object(l["shallowReactive"])((()=>{const t={};for(let o in e)t[o]=void 0;return t})()),o=(()=>{const o={};for(let l in e)o[l]=e=>{t[l]=e};return o})();return{refs:t,onRef:o}}},6127:function(e,t,o){"use strict";o.r(t);var l=o("7a23"),a=o("d8e8"),r=o("3ef4"),c=o("79f6"),n=o("a8da"),i=o("296f");function d(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Object(l["isVNode"])(e)}t["default"]=Object(l["defineComponent"])({props:{projectName:{type:String},branch:{type:String},buildDailogVisible:{type:Boolean,default:!1}},emits:{closeDialog:()=>!0},setup(e,{emit:t}){const{onRef:o,refs:b}=Object(i["a"])({form:a["a"]}),m=Object(l["reactive"])({formData:{removeNm:!0,install:!0,branch:e.branch,shell:!1,shellContent:"",pull:!0,publish:!1,pubTargetIp:"",pubTargetProt:"",pubTargetDir:"",pubTargetUser:"",pubTargetPwd:"",publishId:""},publishList:[],rules:{branch:[{required:!0,message:"Please enter the branch",trigger:"change"}],shellContent:[{required:!0,message:"Please enter the shell content",trigger:"change"}],publishId:[{required:!0,message:"Please select publish info",trigger:"change"}]},logProjectName:"",dialogFormVisible:!1}),s={getPublishList:()=>{Object(c["k"])().then(e=>{m.publishList=e.data.content||[]})},closeDialog:()=>{t("closeDialog")},closeLogDialog:()=>{m.dialogFormVisible=!1},publishChange:()=>{if(m.formData.publish&&m.formData.publishId){const{id:e,describe:t,...o}=m.publishList.find(e=>e.id===m.formData.publishId)||{};m.formData={...m.formData,...o}}},build:()=>{var t;null===(t=b.form)||void 0===t||t.validate(t=>{!0===t&&Object(c["a"])({...m.formData,projectName:e.projectName}).then(e=>{Object(r["a"])({type:"success",message:e.data.message}),m.logProjectName=e.data.content,m.dialogFormVisible=!0})})},removeNm:()=>{m.formData.removeNm&&(m.formData.install=!0)},getShellContent:()=>{m.formData.shell&&Object(c["l"])(e.projectName).then(e=>{m.formData.shellContent=e.data.content})}};return()=>{let t;return Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])(Object(l["resolveComponent"])("el-dialog"),{modelValue:e.buildDailogVisible,"onUpdate:modelValue":t=>e.buildDailogVisible=t,top:"5vh",width:800,title:"build "+e.projectName,"before-close":s.closeDialog},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-form"),{ref:o.form,model:m.formData,"label-width":180,rules:m.rules,style:{width:"700px"}},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"remove node_modules"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:m.formData.removeNm,"onUpdate:modelValue":e=>m.formData.removeNm=e,onChange:s.removeNm},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"is Install："},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:m.formData.install,"onUpdate:modelValue":e=>m.formData.install=e,onChange:s.removeNm},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"Branch"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{modelValue:m.formData.branch,"onUpdate:modelValue":e=>m.formData.branch=e},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"is Pull"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:m.formData.pull,"onUpdate:modelValue":e=>m.formData.pull=e},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"is Shell："},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:m.formData.shell,"onUpdate:modelValue":e=>m.formData.shell=e,onChange:s.getShellContent},null)]}),m.formData.shell&&Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"shell content：",prop:"shellContent"},{default:()=>[Object(l["createVNode"])("span",{style:{color:"red"}},[Object(l["createTextVNode"])("ps: custom shell scripts will completely overwrite built-in commands")]),Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{type:"textarea",modelValue:m.formData.shellContent,"onUpdate:modelValue":e=>m.formData.shellContent=e,rows:20},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"is Publish："},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:m.formData.publish,"onUpdate:modelValue":e=>m.formData.publish=e,onChange:s.getPublishList},null)]}),m.formData.publish&&Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"publish IP：",prop:"publishId"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-select"),{modelValue:m.formData.publishId,"onUpdate:modelValue":e=>m.formData.publishId=e,filterable:!0,clearable:!0,onChange:s.publishChange,style:{}},d(t=m.publishList.map(e=>Object(l["createVNode"])(Object(l["resolveComponent"])("el-option"),{key:e.id,label:e.describe,value:e.id},null)))?t:{default:()=>[t]})]})])]})],footer:()=>Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])("div",{class:"dialog-footer"},[Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{onClick:s.closeDialog},{default:()=>[Object(l["createTextVNode"])("Cancel")]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{type:"primary",onClick:s.build},{default:()=>[Object(l["createTextVNode"])("Build")]})])])}),m.dialogFormVisible&&Object(l["createVNode"])(n["default"],{dialogFormVisible:m.dialogFormVisible,projectName:m.logProjectName,onCloseDialog:s.closeLogDialog},null)])}}})},"8afa":function(e,t,o){"use strict";o.r(t);var l=o("7a23"),a=o("3ef4"),r=o("79f6"),c=o("6127");t["default"]=Object(l["defineComponent"])({setup(){const e=Object(l["reactive"])({tableData:[],formData:{projectName:"",targetUrl:"",useToken:!0},loading:{formLoading:!1,tabLoading:!1},dialogFormVisible:!1,buildDailogVisible:!1,buildProjectName:{projectName:"",branch:""},rules:{projectName:[{required:!0,message:"Please enter the git Project Name",trigger:"change"}],targetUrl:[{required:!0,message:"Please enter the git Target Url",trigger:"change"}]}}),t={handleCreate:()=>{o.loading("form",!0),Object(r["b"])(e.formData).then(()=>{Object(a["a"])({message:"success!!",type:"success"}),o.loading("form"),t.handleDialog(!1),o.fetchData()}).catch(()=>o.loading("form"))},closeBuildDialog:()=>{e.buildDailogVisible=!1,o.fetchData()},handleDialog:t=>e.dialogFormVisible=t,beforeBuild:t=>{e.buildProjectName=t,e.buildDailogVisible=!0},delete:e=>{o.loading("tab",!0),Object(r["d"])(e).then(()=>{o.loading("tab"),o.fetchData()}).catch(()=>o.loading("tab"))}},o={loading:(t,o=!1)=>{const l=t+"Loading";e.loading[l]=o},fetchData:()=>{o.loading("tab",!0),Object(r["i"])().then(t=>{e.tableData=t.data.content||[],o.loading("tab")}).catch(()=>o.loading("tab"))}};return Object(l["onMounted"])(()=>{o.fetchData()}),()=>Object(l["createVNode"])("div",null,[Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{type:"primary",onClick:()=>t.handleDialog(!0)},{default:()=>[Object(l["createTextVNode"])("add")]}),Object(l["withDirectives"])(Object(l["createVNode"])(Object(l["resolveComponent"])("el-table"),{data:e.tableData},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-table-column"),{prop:"projectName",label:"Project Name",width:"300"},null),Object(l["createVNode"])(Object(l["resolveComponent"])("el-table-column"),{prop:"branch",label:"Branch",width:"100"},null),Object(l["createVNode"])(Object(l["resolveComponent"])("el-table-column"),{prop:"targetUrl",label:"Target Url"},null),Object(l["createVNode"])(Object(l["resolveComponent"])("el-table-column"),{label:"operation",width:"180"},{default:({row:e})=>Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{type:"primary",onClick:()=>t.beforeBuild(e)},{default:()=>[Object(l["createTextVNode"])("build")]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{type:"danger",onClick:()=>t.delete(e.projectName)},{default:()=>[Object(l["createTextVNode"])("del")]})])})]}),[[Object(l["resolveDirective"])("loading"),e.loading.tabLoading]]),Object(l["createVNode"])(Object(l["resolveComponent"])("el-dialog"),{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t=>e.dialogFormVisible=t,title:"Create Project",width:"500"},{default:()=>[Object(l["withDirectives"])(Object(l["createVNode"])(Object(l["resolveComponent"])("el-form"),{model:e.formData,"label-width":140,rules:e.rules},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"Project Name",prop:"projectName"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{modelValue:e.formData.projectName,"onUpdate:modelValue":t=>e.formData.projectName=t,clearable:!0},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"Target Url",prop:"targetUrl"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{modelValue:e.formData.targetUrl,"onUpdate:modelValue":t=>e.formData.targetUrl=t,clearable:!0},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"Use Git Config",prop:"useToken"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:e.formData.useToken,"onUpdate:modelValue":t=>e.formData.useToken=t},null)]})]}),[[Object(l["resolveDirective"])("loading"),e.loading.formLoading]])],footer:()=>Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])("div",{class:"dialog-footer"},[Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{onClick:()=>t.handleDialog(!1)},{default:()=>[Object(l["createTextVNode"])("Cancel")]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{type:"primary",onClick:t.handleCreate},{default:()=>[Object(l["createTextVNode"])("Confirm")]})])])}),e.buildDailogVisible&&Object(l["createVNode"])(c["default"],{buildDailogVisible:e.buildDailogVisible,projectName:e.buildProjectName.projectName,branch:e.buildProjectName.branch,onCloseDialog:t.closeBuildDialog},null)])}})},a8da:function(e,t,o){"use strict";o.r(t);var l=o("7a23");t["default"]=Object(l["defineComponent"])({props:{dialogFormVisible:{type:Boolean,default:!1},projectName:{type:String}},emits:{closeDialog:()=>!0},setup(e,{emit:t}){const o=Object(l["ref"])(""),a=Object(l["ref"])(null);Object(l["onMounted"])(()=>{const t=a.value=new EventSource("/get_log?projectName="+e.projectName);t.onmessage=e=>{o.value=(""+e.data).replace(/<br>/g,"\n")},t.onerror=()=>{o.value="error"}});const r={closeDialog:()=>{var e;null===(e=a.value)||void 0===e||e.close(),t("closeDialog")}};return()=>Object(l["createVNode"])(Object(l["resolveComponent"])("el-dialog"),{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t=>e.dialogFormVisible=t,title:"Build Logs",width:"80%",top:"5vh","before-close":r.closeDialog},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{type:"textarea",modelValue:o.value,"onUpdate:modelValue":e=>o.value=e,rows:30,readonly:!0},null)],footer:()=>Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])("div",{class:"dialog-footer"},[Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{onClick:r.closeDialog},{default:()=>[Object(l["createTextVNode"])("Cancel")]})])])})}})}}]);
//# sourceMappingURL=chunk-028bcb42.98421f5e.js.map