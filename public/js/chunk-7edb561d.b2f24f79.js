(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7edb561d","chunk-2d2097aa"],{6127:function(e,t,o){"use strict";o.r(t);var l=o("7a23"),a=o("79f6"),r=o("3ef4"),n=o("a8da");t["default"]=Object(l["defineComponent"])({props:{projectName:{type:String},branch:{type:String},buildDailogVisible:{type:Boolean,default:!1}},emits:{closeDialog:()=>!0},setup(e,{emit:t}){const o=Object(l["reactive"])({formData:{install:!0,branch:e.branch,shell:!1,shellContent:"",publish:!1,pubTargetIp:"",pubTargetProt:"",pubTargetDir:"",pubTargetUser:"",pubTargetPwd:""},rules:{branch:[{required:!0,message:"Please enter the branch",trigger:"change"}],shellContent:[{required:!0,message:"Please enter the shell content",trigger:"change"}],pubTargetIp:[{required:!0,message:"Please enter the target ip",trigger:"change"}],pubTargetProt:[{required:!0,message:"Please enter the target port",trigger:"change"}],pubTargetDir:[{required:!0,message:"Please enter the target dir",trigger:"change"}],pubTargetUser:[{required:!0,message:"Please enter the target user",trigger:"change"}],pubTargetPwd:[{required:!0,message:"Please enter the target pwd",trigger:"change"}]},logProjectName:"",dialogFormVisible:!1}),c={closeDialog:()=>{t("closeDialog")},closeLogDialog:()=>{o.dialogFormVisible=!1},build:()=>{Object(a["a"])({...o.formData,projectName:e.projectName}).then(e=>{Object(r["a"])({type:"success",message:e.data.message}),o.logProjectName=e.data.content,o.dialogFormVisible=!0})},getShellContent:()=>{o.formData.shell&&Object(a["g"])(e.projectName).then(e=>{o.formData.shellContent=e.data.content})}};return()=>Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])(Object(l["resolveComponent"])("el-dialog"),{modelValue:e.buildDailogVisible,"onUpdate:modelValue":t=>e.buildDailogVisible=t,top:"5vh",width:800,title:"build "+e.projectName,"before-close":c.closeDialog},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-form"),{model:o.formData,"label-width":140,rules:o.rules,style:{width:"700px"}},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"is Install："},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:o.formData.install,"onUpdate:modelValue":e=>o.formData.install=e},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"Branch"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{modelValue:o.formData.branch,"onUpdate:modelValue":e=>o.formData.branch=e},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"is Shell："},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:o.formData.shell,"onUpdate:modelValue":e=>o.formData.shell=e,onChange:c.getShellContent},null)]}),o.formData.shell&&Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"shell content：",prop:"shellContent"},{default:()=>[Object(l["createVNode"])("span",{style:{color:"red"}},[Object(l["createTextVNode"])("ps: custom shell scripts will completely overwrite built-in commands")]),Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{type:"textarea",modelValue:o.formData.shellContent,"onUpdate:modelValue":e=>o.formData.shellContent=e,rows:20},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"is Publish："},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:o.formData.publish,"onUpdate:modelValue":e=>o.formData.publish=e},null)]}),o.formData.publish&&Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"publish IP：",prop:"pubTargetIp"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{modelValue:o.formData.pubTargetIp,"onUpdate:modelValue":e=>o.formData.pubTargetIp=e},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"publish Port：",prop:"pubTargetProt"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{modelValue:o.formData.pubTargetProt,"onUpdate:modelValue":e=>o.formData.pubTargetProt=e},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"publish Dir：",prop:"pubTargetDir"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{modelValue:o.formData.pubTargetDir,"onUpdate:modelValue":e=>o.formData.pubTargetDir=e},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"publish User：",prop:"pubTargetUser"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{modelValue:o.formData.pubTargetUser,"onUpdate:modelValue":e=>o.formData.pubTargetUser=e},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"publish Pwd：",prop:"pubTargetPwd"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{modelValue:o.formData.pubTargetPwd,"onUpdate:modelValue":e=>o.formData.pubTargetPwd=e},null)]})])]})],footer:()=>Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])("div",{class:"dialog-footer"},[Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{onClick:c.closeDialog},{default:()=>[Object(l["createTextVNode"])("Cancel")]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{type:"primary",onClick:c.build},{default:()=>[Object(l["createTextVNode"])("Build")]})])])}),o.dialogFormVisible&&Object(l["createVNode"])(n["default"],{dialogFormVisible:o.dialogFormVisible,projectName:o.logProjectName,onCloseDialog:c.closeLogDialog},null)])}})},a8da:function(e,t,o){"use strict";o.r(t);var l=o("7a23");t["default"]=Object(l["defineComponent"])({props:{dialogFormVisible:{type:Boolean,default:!1},projectName:{type:String}},emits:{closeDialog:()=>!0},setup(e,{emit:t}){const o=Object(l["ref"])(""),a=Object(l["ref"])(null);Object(l["onMounted"])(()=>{const t=a.value=new EventSource("/api/get_log?projectName="+e.projectName);t.onmessage=e=>{o.value=(""+e.data).replace(/<br>/g,"\n")},t.onerror=()=>{o.value="error"}});const r={closeDialog:()=>{var e;null===(e=a.value)||void 0===e||e.close(),t("closeDialog")}};return()=>Object(l["createVNode"])(Object(l["resolveComponent"])("el-dialog"),{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t=>e.dialogFormVisible=t,title:"Build Logs",width:"80%",top:"5vh","before-close":r.closeDialog},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{type:"textarea",modelValue:o.value,"onUpdate:modelValue":e=>o.value=e,rows:30,readonly:!0},null)],footer:()=>Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])("div",{class:"dialog-footer"},[Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{onClick:r.closeDialog},{default:()=>[Object(l["createTextVNode"])("Cancel")]})])])})}})}}]);
//# sourceMappingURL=chunk-7edb561d.b2f24f79.js.map