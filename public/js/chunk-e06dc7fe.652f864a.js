(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e06dc7fe","chunk-2d2097aa"],{"296f":function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var l=o("7a23");function a(e){const t=Object(l["shallowReactive"])((()=>{const t={};for(let o in e)t[o]=void 0;return t})()),o=(()=>{const o={};for(let l in e)o[l]=e=>{t[l]=e};return o})();return{refs:t,onRef:o}}},6127:function(e,t,o){"use strict";o.r(t);var l=o("7a23"),a=o("d8e8"),r=o("3ef4"),n=o("79f6"),c=o("a8da"),i=o("296f");function s(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Object(l["isVNode"])(e)}t["default"]=Object(l["defineComponent"])({props:{projectName:{type:String},branch:{type:String},buildDailogVisible:{type:Boolean,default:!1}},emits:{closeDialog:()=>!0},setup(e,{emit:t}){const{onRef:o,refs:d}=Object(i["a"])({form:a["a"]}),b=Object(l["reactive"])({formData:{removeNm:!0,install:!0,branch:e.branch,shell:!1,shellContent:"",pull:!0,publish:!1,pubTargetIp:"",pubTargetProt:"",pubTargetDir:"",pubTargetUser:"",pubTargetPwd:"",publishId:""},publishList:[],rules:{branch:[{required:!0,message:"Please enter the branch",trigger:"change"}],shellContent:[{required:!0,message:"Please enter the shell content",trigger:"change"}],publishId:[{required:!0,message:"Please select publish info",trigger:"change"}]},logProjectName:"",dialogFormVisible:!1}),m={getPublishList:()=>{Object(n["j"])().then(e=>{b.publishList=e.data.content||[]})},closeDialog:()=>{t("closeDialog")},closeLogDialog:()=>{b.dialogFormVisible=!1},publishChange:()=>{if(b.formData.publish&&b.formData.publishId){const{id:e,describe:t,...o}=b.publishList.find(e=>e.id===b.formData.publishId)||{};b.formData={...b.formData,...o}}},build:()=>{var t;null===(t=d.form)||void 0===t||t.validate(t=>{!0===t&&Object(n["a"])({...b.formData,projectName:e.projectName}).then(e=>{Object(r["a"])({type:"success",message:e.data.message}),b.logProjectName=e.data.content,b.dialogFormVisible=!0})})},removeNm:()=>{b.formData.removeNm&&(b.formData.install=!0)},getShellContent:()=>{b.formData.shell&&Object(n["k"])(e.projectName).then(e=>{b.formData.shellContent=e.data.content})}};return()=>{let t;return Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])(Object(l["resolveComponent"])("el-dialog"),{modelValue:e.buildDailogVisible,"onUpdate:modelValue":t=>e.buildDailogVisible=t,top:"5vh",width:800,title:"build "+e.projectName,"before-close":m.closeDialog},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-form"),{ref:o.form,model:b.formData,"label-width":180,rules:b.rules,style:{width:"700px"}},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"remove node_modules"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:b.formData.removeNm,"onUpdate:modelValue":e=>b.formData.removeNm=e,onChange:m.removeNm},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"is Install："},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:b.formData.install,"onUpdate:modelValue":e=>b.formData.install=e,onChange:m.removeNm},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"Branch"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{modelValue:b.formData.branch,"onUpdate:modelValue":e=>b.formData.branch=e},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"is Pull"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:b.formData.pull,"onUpdate:modelValue":e=>b.formData.pull=e},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"is Shell："},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:b.formData.shell,"onUpdate:modelValue":e=>b.formData.shell=e,onChange:m.getShellContent},null)]}),b.formData.shell&&Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"shell content：",prop:"shellContent"},{default:()=>[Object(l["createVNode"])("span",{style:{color:"red"}},[Object(l["createTextVNode"])("ps: custom shell scripts will completely overwrite built-in commands")]),Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{type:"textarea",modelValue:b.formData.shellContent,"onUpdate:modelValue":e=>b.formData.shellContent=e,rows:20},null)]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"is Publish："},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-checkbox"),{modelValue:b.formData.publish,"onUpdate:modelValue":e=>b.formData.publish=e,onChange:m.getPublishList},null)]}),b.formData.publish&&Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])(Object(l["resolveComponent"])("el-form-item"),{label:"publish IP：",prop:"publishId"},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-select"),{modelValue:b.formData.publishId,"onUpdate:modelValue":e=>b.formData.publishId=e,filterable:!0,clearable:!0,onChange:m.publishChange,style:{}},s(t=b.publishList.map(e=>Object(l["createVNode"])(Object(l["resolveComponent"])("el-option"),{key:e.id,label:e.describe,value:e.id},null)))?t:{default:()=>[t]})]})])]})],footer:()=>Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])("div",{class:"dialog-footer"},[Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{onClick:m.closeDialog},{default:()=>[Object(l["createTextVNode"])("Cancel")]}),Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{type:"primary",onClick:m.build},{default:()=>[Object(l["createTextVNode"])("Build")]})])])}),b.dialogFormVisible&&Object(l["createVNode"])(c["default"],{dialogFormVisible:b.dialogFormVisible,projectName:b.logProjectName,onCloseDialog:m.closeLogDialog},null)])}}})},a8da:function(e,t,o){"use strict";o.r(t);var l=o("7a23");t["default"]=Object(l["defineComponent"])({props:{dialogFormVisible:{type:Boolean,default:!1},projectName:{type:String}},emits:{closeDialog:()=>!0},setup(e,{emit:t}){const o=Object(l["ref"])(""),a=Object(l["ref"])(null);Object(l["onMounted"])(()=>{const t=a.value=new EventSource("/get_log?projectName="+e.projectName);t.onmessage=e=>{o.value=(""+e.data).replace(/<br>/g,"\n")},t.onerror=()=>{o.value="error"}});const r={closeDialog:()=>{var e;null===(e=a.value)||void 0===e||e.close(),t("closeDialog")}};return()=>Object(l["createVNode"])(Object(l["resolveComponent"])("el-dialog"),{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t=>e.dialogFormVisible=t,title:"Build Logs",width:"80%",top:"5vh","before-close":r.closeDialog},{default:()=>[Object(l["createVNode"])(Object(l["resolveComponent"])("el-input"),{type:"textarea",modelValue:o.value,"onUpdate:modelValue":e=>o.value=e,rows:30,readonly:!0},null)],footer:()=>Object(l["createVNode"])(l["Fragment"],null,[Object(l["createVNode"])("div",{class:"dialog-footer"},[Object(l["createVNode"])(Object(l["resolveComponent"])("el-button"),{onClick:r.closeDialog},{default:()=>[Object(l["createTextVNode"])("Cancel")]})])])})}})}}]);
//# sourceMappingURL=chunk-e06dc7fe.652f864a.js.map